# راهنمای ادمین - ربات هشتونیم

## 🚀 راه‌اندازی اولیه

### 1. تنظیمات اولیه
- توکن ربات را در فایل `bot.py` در متغیر `BOT_TOKEN` قرار دهید
- شناسه تلگرام سوپر ادمین را در متغیر `SUPER_ADMIN_ID` وارد کنید

### 2. نصب وابستگی‌ها
```bash
pip install -r requirements.txt
```

### 3. اجرای ربات
```bash
python bot.py
```

## 👨‍💼 مدیریت ناشران

### ایجاد ناشر جدید:
1. وارد پنل ادمین شوید
2. "👥 مدیریت ناشران" → "➕ افزودن ناشر جدید"
3. یوزرنیم پیج اینستاگرام را وارد کنید (بدون @)
4. کد ناشر را تعیین کنید (مثال: P001, LIFE01, ...)
5. کد دسترسی 6 رقمی خودکار تولید می‌شود
6. این کد را به ناشر ارسال کنید

### مشاهده لیست ناشران:
- "👥 مدیریت ناشران" → "👥 مشاهده لیست ناشران"
- وضعیت هر ناشر نمایش داده می‌شود:
  - 🟢 فعال: ناشر وارد ربات شده و حساب فعال است
  - 🔴 در انتظار فعال‌سازی: کد دسترسی ارسال شده اما ناشر هنوز وارد نشده
  - ⚫ غیرفعال: حساب غیرفعال شده

## 🏪 مدیریت فروشگاه‌ها

### افزودن فروشگاه جدید:
1. "🏪 مدیریت فروشگاه‌ها" → "➕ افزودن فروشگاه"
2. نام فروشگاه را وارد کنید
3. URL پایه را وارد کنید (مثال: lfshop.ir/newstore)
4. فروشگاه با شناسه یکتا ایجاد می‌شود

### مشاهده فروشگاه‌ها:
- "🏪 مدیریت فروشگاه‌ها" → "🏪 مشاهده فروشگاه‌ها"

## 📦 مدیریت محصولات

### افزودن محصول جدید:
1. "📦 مدیریت محصولات" → "➕ افزودن محصول"
2. فروشگاه مورد نظر را انتخاب کنید
3. اطلاعات محصول را وارد کنید:
   - نام محصول
   - توضیحات
   - قیمت (به تومان)
   - مبلغ تخفیف (اختیاری)

### مشاهده محصولات:
- "📦 مدیریت محصولات" → "📦 مشاهده محصولات"

## 🖼️ مدیریت محتوا

### آپلود محتوا:
1. "🖼️ مدیریت محتوا" → "📤 آپلود محتوا"
2. فروشگاه مورد نظر را انتخاب کنید
3. فایل‌های تصویری یا ویدیویی را ارسال کنید
4. برای پایان آپلود، پیام "پایان" را ارسال کنید

### فرمت‌های پشتیبانی شده:
- **تصاویر**: JPG, JPEG, PNG
- **ویدیو**: MP4, MOV, AVI
- **اسناد**: تمام فرمت‌ها

### مشاهده محتوا:
- "🖼️ مدیریت محتوا" → "📋 مشاهده محتوا"
- تعداد فایل‌های هر فروشگاه نمایش داده می‌شود

### حذف محتوا:
- "🖼️ مدیریت محتوا" → "🗑️ حذف محتوا"
- ⚠️ توجه: این عمل غیرقابل بازگشت است!

## 👨‍💼 مدیریت ادمین‌ها

### افزودن ادمین جدید:
- فقط سوپر ادمین می‌تواند ادمین جدید اضافه کند
- "👨‍💼 مدیریت ادمین‌ها" → "➕ افزودن ادمین"
- شناسه تلگرام (User ID) ادمین جدید را وارد کنید

### حذف ادمین:
- فقط سوپر ادمین می‌تواند ادمین حذف کند
- "👨‍💼 مدیریت ادمین‌ها" → "➖ حذف ادمین"

## 📁 ساختار فایل‌ها

```
telegram robot hashtonim/
├── bot.py                 # فایل اصلی ربات
├── database.py            # مدیریت دیتابیس
├── requirements.txt       # وابستگی‌ها
├── README.md             # راهنمای کلی
├── ADMIN_GUIDE.md        # راهنمای ادمین
├── hashtonim_bot.db      # فایل دیتابیس (خودکار ایجاد می‌شود)
└── content/              # محتوای تبلیغاتی
    ├── store_1/          # محتوای فروشگاه شماره 1
    ├── store_2/          # محتوای فروشگاه شماره 2
    └── ...
```

## 🔧 نکات فنی

### دیتابیس:
- از SQLite استفاده می‌شود
- فایل دیتابیس خودکار ایجاد می‌شود
- جداول: publishers, stores, products, admins

### محتوا:
- فایل‌ها در پوشه `content/store_X/` ذخیره می‌شوند
- نام فایل‌ها با timestamp یکتا می‌شوند
- حداکثر 10 فایل در هر media group ارسال می‌شود

### امنیت:
- تمام عملیات ادمین بررسی دسترسی می‌شوند
- کد دسترسی ناشران یکتا و 6 رقمی هستند
- فقط سوپر ادمین می‌تواند ادمین اضافه/حذف کند

## 🆘 عیب‌یابی

### مشکلات رایج:

1. **ربات پاسخ نمی‌دهد**
   - توکن ربات را بررسی کنید
   - اتصال اینترنت را بررسی کنید

2. **خطا در آپلود فایل**
   - اندازه فایل نباید بیش از 50MB باشد
   - مجوزهای پوشه content را بررسی کنید

3. **دسترسی غیرمجاز**
   - شناسه ادمین را در دیتابیس بررسی کنید
   - SUPER_ADMIN_ID را بررسی کنید

### لاگ‌ها:
- خطاها در کنسول نمایش داده می‌شوند
- برای debugging بیشتر، logging را فعال کنید

## 📞 پشتیبانی

برای مشکلات فنی یا سؤالات، با تیم توسعه تماس بگیرید.
